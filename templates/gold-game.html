<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{{ game.title }} – {{ game.name }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/gold-game.css') }}" />
</head>
<body>
  <div class="game-root">
    <!-- TOP BAR -->
    <header class="top-bar">
      <div class="top-left">
        <div class="game-label">GAME <span id="roundId">–</span></div>
        <div class="players"><span id="playerCount">0</span> PLAYERS</div>
        <div class="user-stats">
          You: <span id="userName"></span> · Bets: <span id="userBetCount">0</span>
        </div>
      </div>

      <div class="top-center">
        <div class="timer-pill">
          <span id="timerText">--</span>
        </div>
      </div>

      <div class="top-right">
        <div class="coins">
          <img src="{{ url_for('static', filename='img/coin.png') }}" alt="Coins">
          <span id="walletBalance">0</span>
        </div>
      </div>
    </header>

    <!-- FOOTBALL PITCH -->
    <section class="pitch">
      <!-- 6 GOALS -->
      <div class="goals">
        <div class="goals-row">
          {% for i in range(1,4) %}
          <div class="goal pad" data-pad="{{ i }}">
            <img src="{{ url_for('static', filename='img/gold_goal.png') }}" alt="Goal">
            <span class="pad-number"></span>
            <span class="pad-user"></span>
          </div>
          {% endfor %}
        </div>
        <div class="goals-row">
          {% for i in range(4,7) %}
          <div class="goal pad" data-pad="{{ i }}">
            <img src="{{ url_for('static', filename='img/gold_goal.png') }}" alt="Goal">
            <span class="pad-number"></span>
            <span class="pad-user"></span>
          </div>
          {% endfor %}
        </div>
      </div>

      <!-- EMOJI PLAYER + BALL -->
      <div class="player-area">
      
        <!-- Ball -->
        <img
          id="ballSprite"
          class="ball"
          src="{{ url_for('static', filename='img/gold_ball.png') }}"
          alt="Ball"
        >
      </div>
    </section>

    <!-- CONTROLS -->
    <section class="controls">
      <div class="numbers-title">Select your number (0–9)</div>

      <div class="numbers-row">
        {% for n in range(5) %}
        <button class="num-chip" data-number="{{ n }}">{{ n }}</button>
        {% endfor %}
      </div>

      <div class="numbers-row">
        {% for n in range(5,10) %}
        <button class="num-chip" data-number="{{ n }}">{{ n }}</button>
        {% endfor %}
      </div>

      <!-- YOUR BETS DISPLAY -->
      <div class="my-bets-section">
        <div class="my-bets-title">
          Your bets in this game:
          <span id="myBetsRow" class="my-bets-row"></span>
        </div>
      </div>

      <!-- PLACE BET BUTTON -->
      <button id="placeBetBtn" class="bet-button">
        Place Bet (₹{{ game.bet_amount }})
      </button>

      <div id="statusMessage" class="status"></div>
    </section>

    <!-- RESULT / SLOTS POPUP -->
    <div id="resultPopup" class="result-popup">
      <div class="result-popup-card">
        <h2 id="popupTitle">Game Finished</h2>
        <p id="popupMessage">
          This game has ended. Please keep playing to keep your winning chances high.
        </p>
        <div class="popup-buttons">
          <button id="popupHomeBtn" class="popup-btn primary">Home</button>
          <button id="popupLobbyBtn" class="popup-btn secondary">Back to Lobby</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <script>
    // ✅ FIXED: Use window.* variables (NOT const) so gold-game.js can read them
    window.GAME_TYPE = "{{ game_type }}";
    window.FIXED_BET_AMOUNT = {{ game.bet_amount }};
    window.GAME_USER_ID = "{{ session.get('user_id') }}";
    window.GAME_USERNAME = "{{ session.get('username') }}";
  </script>
  <script src="{{ url_for('static', filename='js/gold-game.js') }}"></script>
</body>
</html>
