<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ game.title }} - Join Game</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/game-lobby.css') }}">
</head>
<body>
  <div class="lobby-container">

    <!-- HEADER with Back Button -->
    <header class="lobby-header">
      <button class="back-btn" onclick="window.location.href='/home'">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
      </button>
      <h1 class="lobby-title">{{ game.title }}</h1>
      <div class="header-spacer"></div>
    </header>

    <!-- GAME BANNER -->
    <section class="game-banner">
      <div class="banner-image">
        <img src="{{ url_for('static', filename='img/' + game_type + '_banner.png') }}" alt="{{ game.title }}" onerror="this.src='{{ url_for('static', filename='img/game_banner_default.png') }}'">
      </div>
      <div class="game-info">
        <h2 class="game-name">{{ game.name }}</h2>
        <div class="game-meta">
          <div class="rating">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="#fbbf24">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
            </svg>
            <span>8.1/10</span>
          </div>
          <div class="category">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"/>
              <path d="M12 6v6l4 2"/>
            </svg>
            <span>Casual</span>
          </div>
        </div>
      </div>
    </section>

    <!-- PLAY NOW BUTTON -->
    <div class="play-now-section">
      <button class="play-now-btn-large" id="quickPlayBtn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
          <path d="M8 5v14l11-7z"/>
        </svg>
        <span>Play now</span>
      </button>
    </div>

    <!-- GAME RULES/DESCRIPTION -->
    <section class="game-rules">
      <h3 class="section-heading">How to Play</h3>
      <div class="rules-content">
        <p><strong>Game Type:</strong> {{ game.type|title }}</p>
        <p><strong>Bet Amount:</strong> ₹{{ game.bet_amount }}</p>
        <p><strong>Winning Prize:</strong> ₹{{ game.payout }}</p>
        <p><strong>Players per Game:</strong> Up to 6 players</p>
        <p><strong>Game Duration:</strong> 5 minutes per round</p>
        
        <div class="rules-list">
          <h4>Rules:</h4>
          <ul>
            <li>Select a number (0-9) to bet on</li>
            <li>You can place up to 4 bets per round</li>
            <li>Betting closes 15 seconds before round ends</li>
            <li>If your number matches the winning number, you win!</li>
            <li>Results are announced immediately after round ends</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- AVAILABLE TABLES -->
    <section class="tables-section">
      <h3 class="section-heading">Available Tables</h3>
      <div id="tablesGrid" class="tables-grid">
        <!-- Tables will be dynamically loaded here -->
      </div>
    </section>

  </div>

  <script>
    const GAME_TYPE = "{{ game_type }}";
    const GAME_CONFIG = {{ game|tojson }};
  </script>
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <script src="{{ url_for('static', filename='js/game-lobby.js') }}"></script>
</body>
</html>
